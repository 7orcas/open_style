<!-- 
     no-cache:true
     callback-class:com.progenso.desma.html.entities.mdata.MachineListCallback 
-->


<section>
    
    <div class="masterdata-page">

        <div data-actionmenu="recordEdit,recordSave,recordUndo,recordNew:'MachineAdd'"  
             data-permission-key="_admin" 
             class="sidebar" 
             data-ng-include 
             data-src="'template/app/sidebar_actions.html'"></div>


        <div class="main">&nbsp;
    
              
            <div class="machine-table">
            
                <div class="div-table-toolbar">
                    <div class="left record-count">
                        {{label('RecordCount') + ':' + getListCount();}}
                    </div>
                </div>
                               
                <div id="scroller-anchor-header"></div> 
                <div id="scroller-header" style="width:100px;">                                
                    <div class="so0rh">
                        <div table-col-head field="PlantCode"></div>   <!-- condition:plant -->
                        <div table-col-head class="so43-int so0-h" field="Nr"></div>
                        <div table-col-head field="Descr"></div>
                        <div table-col-head class="so43-int so0-h" field="Stations"></div>
                        <div table-col-head class="so43-int so0-h" field="MaxMouldGroups"></div>   <!-- callback="MaxMouldGroups" -->
                        <div table-col-head class="so43-int so0-h" field="MaxColors"></div>        <!-- callback="MaxColors" -->
                        <div table-col-head class="so43-int so0-h" field="Injectors"></div>        <!-- callback="Injectors" -->
                        <div table-col-head class="so43-cap so0-h" field="Capacity"></div>
                        <div table-col-head class="so43-cap so0-h" field="CapacityStation"></div>
                        
                        <!-- callback column -->
                        <!-- div class="???" callback-head="Attributes"></div-->
                        
                        <div table-col-head field="Active"></div>
                                            
                        <div table-col-head-del></div>
                    </div>
                </div>
                
                <div ng-repeat="record in list | orderBy:sortRow:sort_reverse">
                    
                    <div class="div-table-error"  ng-if="record.containsErrors()">
                        <div ng-repeat="err in record._errors" >
                            <div data-ng-include src="'template/app/error_message_table.html'"></div>
                        </div>                          
                    </div>

                    <div class="div-table-row">
                        <div table-col-row field="PlantCode" select-options="p.getCode() as p.getCode() for p in plants"></div>  <!-- condition:plant -->
                        <div table-col-row class="so43-int so0-c" field="Nr"></div>        
                        <div table-col-row field="Descr"></div>
                        <div table-col-row class="so43-int so0-c" field="Stations"></div>
                        <div table-col-row class="so43-int so0-c" field="MaxMouldGroups"></div>   <!-- callback="MaxMouldGroups" -->
                        <div table-col-row class="so43-int so0-c" field="MaxColors"></div>        <!-- callback="MaxColors" -->
                        <div table-col-row class="so43-int so0-c" field="Injectors"></div>        <!-- callback="Injectors" -->
                        <div table-col-row class="so43-cap so0-c" field="Capacity"></div>
                        <div table-col-row class="so43-cap so0-c" field="CapacityStation"></div>
                        
                        <!-- callback column -->
                        <!-- div table-col-row callback-field="Attributes"></div -->
                        
                        <div table-col-row field="Active"></div>
                                                
                        <div table-col-row-del></div>
                        <div table-col-row-warning></div>

                        <div ng-if="record.isSelect()" class="div-table-icon">
                            <a href="" ng-click="showDetail(record.getId())"><i class="fa fa-arrow-circle-up" style="font-size:19px;margin-left:15px;margin-top:3px;"></i></a>
                        </div>
                        <div ng-if="!record.isSelect()" class="div-table-icon">
                            <a href="" ng-click="showDetail(record.getId())"><i class="fa fa-arrow-circle-down" style="font-size:19px;margin-left:15px;margin-top:3px;"></i></a>
                        </div>

                    </div>


                    <div ng-if="record.isSelect()" class="div-table-inner" style="margin-left:25px;">
                            
                            <div class="so0-table-ti">
                                {{shiftLabel(record)}}
                            </div>


                            <div class="so0-trhi">
                                <div table-col-head class="so0-h so43-cod" label="Shift"></div>
                                <div table-col-head class="so0-h so43-day" label="Monday"></div>
                                <div table-col-head class="so0-h so43-day" label="Tuesday"></div>
                                <div table-col-head class="so0-h so43-day" label="Wednesday"></div>
                                <div table-col-head class="so0-h so43-day" label="Thursday"></div>
                                <div table-col-head class="so0-h so43-day" label="Friday"></div>
                                <div table-col-head class="so0-h so43-day" label="Saturday"></div>
                                <div table-col-head class="so0-h so43-day" label="Sunday"></div>
                                <div table-col-head field="Active"></div>
                            </div>

                            <div ng-repeat="record in record.getShifts()" >

                                <div class="div-table-error"  ng-if="record.containsErrors()">
                                    <div ng-repeat="err in record._errors" >
                                        <div data-ng-include src="'template/app/error_message_table.html'"></div>
                                    </div>                          
                                </div>

                                <div ng-class="{'div-table-row':record.isActiveShift(),'div-table-row so43-sia':!record.isActiveShift()}"  childmodel="Shifts">
                                    <div table-col-row class="so0-c so43-cod" field="ShiftCode"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Monday"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Tuesday"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Wednesday"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Thursday"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Friday"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Saturday"></div>
                                    <div table-col-row class="so0-c so43-day" zero-as-null field="Sunday"></div>
                                    <div table-col-row field="Active"></div>  
                                    
                                    <div table-col-row-warning></div>
                                </div>
                            </div>
                            
                                  
 
                            <!-- callback="colors:start" -->
                            
                            <div class="so0-table-ti so43-ct">
                                {{colorLabel(record)}}
                            </div>


                            <div class="so0-trhi">
                                <div table-col-head class="so0-h so43-col" label="Color"></div>
                                <div table-col-head field="Active"></div>
                                <div table-col-head-del></div>
                            </div>

                            <div ng-repeat="record in record.getColors()" >

                                <div class="div-table-error"  ng-if="record.containsErrors()">
                                    <div ng-repeat="err in record._errors" >
                                        <div data-ng-include src="'template/app/error_message_table.html'"></div>
                                    </div>                          
                                </div>

                                <div class="div-table-row"  childmodel="Colors">
                                    <div table-col-row class="so0-c so43-col" field="Code"></div>
                                    <div table-col-row field="Active"></div>
                                    <div table-col-row-del></div>
                                                                        
                                    <div table-col-row-warning></div>
                                </div>
                            </div>
                            
                            <div class="so43-ac" data-ng-click="_ac(record)"><a class="so43-ac" href="">{{label('ColorA');}}</a></div>
                            
                            <!-- callback="colors:end" -->                      
                            
                            



                            <div ng-if="selectedX(record.getId())"  class="so0rh-np so43-xt">
                                <div table-col-head field="PlantCode"></div>   <!-- condition:plant -->
                                <div table-col-head class="so43-int so0-h" field="Nr"></div>
                                <div table-col-head field="Descr"></div>
                                <div table-col-head class="so43-int so0-h" field="Stations"></div>
                                <div table-col-head class="so43-int so0-h" field="MaxMouldGroups"></div>   <!-- callback="MaxMouldGroups" -->
                                <div table-col-head class="so43-int so0-h" field="MaxColors"></div>        <!-- callback="MaxColors" -->
                                <div table-col-head class="so43-int so0-h" field="Injectors"></div>        <!-- callback="Injectors" -->
                                <div table-col-head class="so43-cap so0-h" field="Capacity"></div>
                                <div table-col-head class="so43-cap so0-h" field="CapacityStation"></div>
                                
                                <!-- callback column -->
                                <!-- div class="???" callback-head="Attributes"></div-->
                                
                                <div table-col-head field="Active"></div>
                                                    
                                <div table-col-head-del></div>
                            </div>

                    </div>
                </div>
            </div>
        
        </div>
        
    </div>

</section>